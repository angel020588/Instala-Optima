En la sección de Nivel de Agua, vamos a incluir:

<!-- CONTROL DE BOMBA -->
<div class="mt-6 bg-white p-4 rounded-lg shadow-lg">
  <h4 class="text-lg font-bold text-gray-800 mb-2">Control de Bomba</h4>
  <label class="flex items-center space-x-3">
    <span>Encender automáticamente si baja de:</span>
    <input type="number" id="umbralAuto" min="5" max="90" value="30" class="w-20 border px-2 py-1 rounded" />%
  </label>

  <div class="mt-4 flex items-center space-x-4">
    <span class="font-semibold">Encendido Manual:</span>
    <button onclick="encenderBomba(true)" class="bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded">Encender</button>
    <button onclick="encenderBomba(false)" class="bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded">Apagar</button>
  </div>

  <p class="text-sm mt-2 text-gray-500">El ESP32 revisará cada 10 segundos si debe encender la bomba.</p>
</div>

⚙️ FUNCIONES A AGREGAR EN app.js
// Enviar comando de bomba (ON/OFF) al servidor/ESP32
function encenderBomba(estado) {
  const clienteId = "cliente-demo"; // después será dinámico
  fetch(`/api/bomba/${clienteId}`, {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ encender: estado })
  })
    .then(res => res.json())
    .then(data => alert(`Bomba ${estado ? "ENCENDIDA" : "APAGADA"}`))
    .catch(err => alert("Error al enviar comando"));
}

📍 UBICACIÓN DEL CLIENTE

Botón:

<button onclick="obtenerUbicacion()" class="bg-blue-500 text-white px-4 py-2 rounded mt-3">
  📍 Compartir Ubicación
</button>
<p id="ubicacionText" class="text-sm text-gray-500 mt-2"></p>


JS:

let ubicacionCliente = "";

function obtenerUbicacion() {
  if (navigator.geolocation) {
    navigator.geolocation.getCurrentPosition(
      (position) => {
        const { latitude, longitude } = position.coords;
        ubicacionCliente = `${latitude},${longitude}`;
        document.getElementById("ubicacionText").textContent = `Ubicación registrada: ${ubicacionCliente}`;
      },
      () => alert("No se pudo obtener ubicación.")
    );
  } else {
    alert("Navegador no soporta geolocalización");
  }
}
